<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Market Data | MarkTrade</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-950 text-white min-h-screen font-sans">

  <!-- Navbar -->
  <nav class="bg-black px-6 py-4 flex justify-between items-center shadow-lg">
    <div class="flex items-center space-x-3">
      <img src="/market trade front/assets/images/Mark.png" alt="MarkTrade Logo" class="h-10">
      <span class="text-2xl font-bold text-green-400">MarkTrade</span>
    </div>
    <ul class="flex space-x-6 text-sm">
      <li><a href="homepage.html" class="hover:text-green-400">Home</a></li>
      <li><a href="liveData.html" class="text-green-400 font-semibold">Live Data</a></li>
      <li><a href="AIRecommendations.html" class="hover:text-green-400">AI Recommendations</a></li>
      <li><a href="sentimentAnalysis.html" class="hover:text-green-400">Sentiment Analysis</a></li>
    </ul>
    <a href="login.html" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded text-sm">Login</a>
  </nav>

  <!-- Header -->
  <header class="text-center py-10 bg-gradient-to-r from-blue-800 via-indigo-800 to-purple-800">
    <h1 class="text-4xl font-bold mb-2">ðŸ“Š Live Market Dashboard</h1>
    <p class="text-gray-200 text-sm">Real-time price trends, smart toggles, and stock comparison.</p>
  </header>

  <!-- Stock Selection & Controls -->
  <section class="p-6 text-center">
    <div class="mb-4">
      <label class="mr-2 font-semibold">Choose Asset:</label>
      <select id="symbolSelect" class="bg-gray-800 border border-gray-700 text-white p-2 rounded">
        <option value="AAPL">AAPL</option>
        <option value="TSLA">TSLA</option>
        <option value="BTC">BTC</option>
      </select>

      <label class="ml-6 mr-2 font-semibold">Timeframe:</label>
      <select id="timeframeSelect" class="bg-gray-800 border border-gray-700 text-white p-2 rounded">
        <option value="1">1 Min</option>
        <option value="5">5 Min</option>
        <option value="60">1 Hour</option>
      </select>
    </div>
  </section>

  <!-- Live Chart -->
  <section class="px-6 mb-10">
    <div class="bg-gray-900 p-6 rounded-lg shadow-xl">
      <h2 class="text-2xl font-bold text-green-400 mb-4">ðŸ“ˆ Live Price Chart</h2>
      <canvas id="liveChart" height="120"></canvas>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-black text-center py-6 text-xs text-gray-400">
    &copy; 2025 MarkTrade â€” All rights reserved.
  </footer>

  <!-- JavaScript -->
  <script>
    const ctx = document.getElementById('liveChart').getContext('2d');
    let chart;

    const colors = {
      AAPL: '#21ce99',
      TSLA: '#ffa500',
      BTC: '#f7931a'
    };

    const generateFakePrice = (symbol) => {
      const base = { AAPL: 190, TSLA: 700, BTC: 64000 }[symbol];
      return base + Math.random() * 10 - 5;
    };

    const generateFakeLabel = (intervalMin) => {
      const now = new Date();
      return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    };

    const initChart = (symbol, interval) => {
      const color = colors[symbol];
      if (chart) chart.destroy();

      chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label: `${symbol} Price`,
            data: [],
            borderColor: color,
            backgroundColor: color + '33',
            tension: 0.4,
            fill: true,
            pointRadius: 2,
            borderWidth: 2,
          }]
        },
        options: {
          responsive: true,
          scales: {
            x: {
              ticks: { color: '#ccc' },
              title: { display: true, text: 'Time', color: '#ccc' }
            },
            y: {
              ticks: { color: '#ccc' },
              title: { display: true, text: 'Price ($)', color: '#ccc' }
            }
          },
          plugins: {
            legend: {
              labels: { color: '#21ce99' }
            }
          }
        }
      });

      updateChart(symbol, interval);
      setInterval(() => updateChart(symbol, interval), 3000);
    };

    const updateChart = (symbol, interval) => {
      const label = generateFakeLabel(interval);
      const value = generateFakePrice(symbol);

      chart.data.labels.push(label);
      chart.data.datasets[0].data.push(value);

      if (chart.data.labels.length > 25) {
        chart.data.labels.shift();
        chart.data.datasets[0].data.shift();
      }

      chart.update();
    };

    document.addEventListener("DOMContentLoaded", () => {
      const symbolSelect = document.getElementById("symbolSelect");
      const timeframeSelect = document.getElementById("timeframeSelect");

      let currentSymbol = symbolSelect.value;
      let currentTimeframe = parseInt(timeframeSelect.value);

      initChart(currentSymbol, currentTimeframe);

      symbolSelect.addEventListener("change", () => {
        currentSymbol = symbolSelect.value;
        initChart(currentSymbol, currentTimeframe);
      });

      timeframeSelect.addEventListener("change", () => {
        currentTimeframe = parseInt(timeframeSelect.value);
        initChart(currentSymbol, currentTimeframe);
      });
    });
  </script>
</body>
</html>
